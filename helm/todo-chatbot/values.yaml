# Default values for todo-chatbot Helm chart

# Image configuration
image:
  frontend:
    repository: todo-chatbot-frontend
    tag: "0.1.0"
    pullPolicy: Never  # Use Never for local Minikube images
  backend:
    repository: todo-chatbot-backend
    tag: "0.1.0"
    pullPolicy: Never  # Use Never for local Minikube images

# Replica counts
replicaCount:
  frontend: 2
  backend: 2

# Service configuration
service:
  frontend:
    type: NodePort
    port: 80
    targetPort: 3000
    nodePort: 30080
  backend:
    type: NodePort
    port: 8000
    targetPort: 8000
    nodePort: 30081

# Resource limits and requests
resources:
  frontend:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  backend:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# Health check configuration
healthCheck:
  frontend:
    livenessProbe:
      httpGet:
        path: /api/health
        port: 3000
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3
    readinessProbe:
      httpGet:
        path: /api/health
        port: 3000
      initialDelaySeconds: 20
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  backend:
    livenessProbe:
      httpGet:
        path: /health
        port: 8000
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3
    readinessProbe:
      httpGet:
        path: /health
        port: 8000
      initialDelaySeconds: 20
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3

# Environment variables
env:
  backend:
    BACKEND_URL: "http://todo-chatbot-backend:8000"
  frontend:
    NEXT_PUBLIC_BACKEND_URL: "http://192.168.49.2:30081"
    NEXT_PUBLIC_API_BASE_URL: "http://192.168.49.2:30081"
    NEXT_PUBLIC_API_URL: "http://192.168.49.2:30081"

# Secrets (reference to Kubernetes secret)
secrets:
  name: todo-chatbot-secrets
  # These values should be created separately using kubectl
  # kubectl create secret generic todo-chatbot-secrets \
  #   --from-literal=DATABASE_URL="postgresql://..." \
  #   --from-literal=JWT_SECRET="..." \
  #   --from-literal=BETTER_AUTH_SECRET="..." \
  #   --from-literal=BETTER_AUTH_URL="..."
